# 简化时间戳显示格式

## 🎯 优化目标

根据用户反馈，简化时间戳内容的显示格式，只显示时间范围和文本内容，不显示说话人信息。

## 🔧 修改内容

### 1. 前端显示简化

#### **修改前（复杂格式）**
```
[00:01-00:12] Speaker 1  哈喽，大家好，今天给大家讲CSS的安装
[00:13-00:18] Speaker 2  好的，我们来看一下具体的操作步骤
[00:19-00:25] Speaker 1  首先呢，我们打开cos的官网
```

#### **修改后（简洁格式）**
```
[00:01-00:12]  哈喽，大家好，今天给大家讲CSS的安装
[00:13-00:18]  好的，我们来看一下具体的操作步骤
[00:19-00:25]  首先呢，我们打开cos的官网
```

### 2. 时间戳内容生成

#### **修改前**
```typescript
setTimestampContent(segments.map((seg: any) => {
  const speakerInfo = seg.speaker && seg.speaker !== 'Speaker 1' ? ` ${seg.speaker}` : ''
  return `[${formatTime(seg.startTime)}-${formatTime(seg.endTime)}]${speakerInfo} ${seg.text}`
}).join('\n'))
```

#### **修改后**
```typescript
setTimestampContent(segments.map((seg: any) => 
  `[${formatTime(seg.startTime)}-${formatTime(seg.endTime)}] ${seg.text}`
).join('\n'))
```

### 3. 显示组件简化

#### **修改前（双标签）**
```tsx
<div className="flex flex-col gap-1 flex-shrink-0">
  <span className="text-coral-600 font-mono text-xs bg-coral-100 px-2 py-1 rounded">
    {timeRange}
  </span>
  {speaker && (
    <span className="text-blue-600 font-mono text-xs bg-blue-100 px-2 py-1 rounded">
      {speaker}
    </span>
  )}
</div>
```

#### **修改后（单标签）**
```tsx
<span className="text-coral-600 font-mono text-xs bg-coral-100 px-2 py-1 rounded flex-shrink-0">
  {timeRange}
</span>
```

## 📊 后端格式支持

### 支持的时间戳格式

#### **格式1：带说话人ID**
```
[1:26.290,1:28.970,0] 文本内容
```
- 解析：开始时间 1:26.290，结束时间 1:28.970，说话人ID 0
- 处理：提取时间信息，忽略说话人信息

#### **格式2：带说话人标识**
```
[1:26.290,1:28.970]spk0 文本内容
```
- 解析：开始时间 1:26.290，结束时间 1:28.970，说话人 spk0
- 处理：提取时间信息，忽略说话人信息

#### **格式3：普通格式**
```
[1:26.290,1:28.970] 文本内容
```
- 解析：开始时间 1:26.290，结束时间 1:28.970
- 处理：直接提取时间和文本信息

### 解析逻辑

```typescript
// 格式1: [1:26.290,1:28.970,0] 文本内容
const format1Match = line.match(/\[(\d+):(\d+\.\d+),(\d+):(\d+\.\d+),(\d+)\]\s*(.*)/)

// 格式2: [1:26.290,1:28.970]spk0 文本内容
const format2Match = line.match(/\[(\d+):(\d+\.\d+),(\d+):(\d+\.\d+)\](?:spk(\d+))?\s*(.*)/)

// 格式3: [1:26.290,1:28.970] 文本内容
const format3Match = line.match(/\[(\d+):(\d+\.\d+),(\d+):(\d+\.\d+)\]\s*(.*)/)
```

## 🎨 视觉效果

### 显示样式
- **时间戳标签**: 橙色背景 (`bg-coral-100`)，珊瑚色文字 (`text-coral-600`)
- **文本内容**: 深灰色文字 (`text-charcoal-700`)，行间距适中 (`leading-relaxed`)
- **布局**: 左侧时间戳，右侧文本内容，间距3个单位 (`gap-3`)

### 响应式设计
- **时间戳宽度**: 固定宽度，不收缩 (`flex-shrink-0`)
- **文本内容**: 自适应宽度，支持换行
- **滚动区域**: 最大高度240px，超出滚动 (`max-h-60 overflow-y-auto`)

## 📋 用户体验改进

### 1. 信息密度优化
- ✅ **减少视觉噪音**: 移除不必要的说话人标签
- ✅ **突出重点**: 专注于时间和内容信息
- ✅ **提高可读性**: 简洁的格式更易阅读

### 2. 界面一致性
- ✅ **统一风格**: 与其他UI组件保持一致
- ✅ **颜色协调**: 使用项目统一的颜色方案
- ✅ **间距规范**: 遵循设计系统的间距标准

### 3. 功能完整性
- ✅ **复制功能**: 复制的内容格式简洁
- ✅ **下载功能**: 下载的文件格式清晰
- ✅ **向后兼容**: 支持多种输入格式

## 🔄 兼容性保证

### 输入格式兼容
- ✅ **多格式支持**: 自动识别不同的时间戳格式
- ✅ **容错处理**: 无法解析时使用默认格式
- ✅ **数据完整**: 保留所有文本内容

### 功能兼容
- ✅ **说话人信息**: 后端仍然解析和存储说话人信息
- ✅ **API接口**: 不影响现有API接口
- ✅ **数据结构**: 保持数据结构的完整性

## 🎯 显示效果

### 最终效果
```
[01:26-01:28]  哈喽，大家好，今天给大家讲CSS的安装
[01:29-01:35]  然后注册登录，以及基本的配置
[01:36-01:42]  如何适合国内用户来访问来使用
[01:43-01:48]  好，首先呢，我们打开cos的官网
```

### 特点
- 🎯 **简洁明了**: 只显示必要信息
- 🎯 **易于阅读**: 清晰的时间标记
- 🎯 **节省空间**: 减少垂直空间占用
- 🎯 **专业外观**: 符合专业工具的设计标准

🎉 **现在时间戳显示更加简洁，只显示时间范围和文本内容，提供更好的阅读体验！**
